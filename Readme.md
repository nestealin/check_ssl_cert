
### 安装指引
```bash
git clone https://github.com/nestealin/check_ssl_cert.git

cd check_ssl_cert

pip3 install -r requirements.txt
```

---

### 域名检测
* 可自行调整 `run.py` 中 `shown_status` 输出开关。
#### 单域名检测
```bash
python3 run.py


>>>
============
温馨提醒:
1) 本脚本默认检查30天内过期域名, 如需修改阈值, 请在"conf.py"中修改"detect_expire_date"字段
2) "本地域名列表检测" 需要提前在当前目录下"./meta_domain_data/domain.conf"文件中提前编写, 详情可参考"domain.sample"文件
============
本脚本可提供如下检测操作:
1. 单域名检测
2. 根据本地域名列表检测
3. 退出
请输入操作序号: 1
```

> 输出如下:
```bash
[2021-08-21 14:54:27.176] run.py[line:285] INFO 
====================
检测结束, 详细结果如下:
====================
[2021-08-21 14:54:27.177] run.py[line:299] INFO 发现1个域名正常域名, 详情如下:
www.sina.com
[2021-08-21 14:54:27.177] run.py[line:296] INFO 本次未检测到域名存在证书即将过期状态，跳过输出...
[2021-08-21 14:54:27.177] run.py[line:296] INFO 本次未检测到域名存在其他错误状态，跳过输出...
[2021-08-21 14:54:27.177] run.py[line:296] INFO 本次未检测到域名存在连接拒绝状态，跳过输出...
[2021-08-21 14:54:27.177] run.py[line:296] INFO 本次未检测到域名存在与证书域名不匹配状态，跳过输出...
[2021-08-21 14:54:27.177] run.py[line:296] INFO 本次未检测到域名存在证书已过期状态，跳过输出...
[2021-08-21 14:54:27.177] run.py[line:296] INFO 本次未检测到域名存在连接超时状态，跳过输出...
[2021-08-21 14:54:27.177] run.py[line:296] INFO 本次未检测到域名存在根域id获取失败状态，跳过输出...
[2021-08-21 14:54:27.177] run.py[line:296] INFO 本次未检测到域名存在dns解析存在其他错误状态，跳过输出...
[2021-08-21 14:54:27.177] run.py[line:296] INFO 本次未检测到域名存在域名解析异常状态，跳过输出...
[2021-08-21 14:54:27.177] run.py[line:296] INFO 本次未检测到域名存在远程主机解析异常状态，跳过输出...
[2021-08-21 14:54:27.178] run.py[line:296] INFO 本次未检测到域名存在远程主机SSL连接异常状态，跳过输出...
[2021-08-21 14:54:27.178] run.py[line:296] INFO 本次未检测到域名存在证书存在其他异常状态，跳过输出...
```

#### 域名列表检测
```bash
python3 run.py


>>>
============
温馨提醒:
1) 本脚本默认检查30天内过期域名, 如需修改阈值, 请在"conf.py"中修改"detect_expire_date"字段
2) "本地域名列表检测" 需要提前在当前目录下"./meta_domain_data/domain.conf"文件中提前编写, 详情可参考"domain.sample"文件
============
本脚本可提供如下检测操作:
1. 单域名检测
2. 根据本地域名列表检测
3. 退出
请输入操作序号: 2
```

> 输出如下:
```bash
[2021-08-21 15:00:20.763] run.py[line:285] INFO 
====================
检测结束, 详细结果如下:
====================
[2021-08-21 15:00:20.763] run.py[line:299] INFO 发现4个域名正常域名, 详情如下:
www.taobao.com
home.jd.com
www.qq.com
console.aws.amazon.com
[2021-08-21 15:00:20.763] run.py[line:296] INFO 本次未检测到域名存在证书即将过期状态，跳过输出...
[2021-08-21 15:00:20.763] run.py[line:296] INFO 本次未检测到域名存在其他错误状态，跳过输出...
[2021-08-21 15:00:20.763] run.py[line:296] INFO 本次未检测到域名存在连接拒绝状态，跳过输出...
[2021-08-21 15:00:20.763] run.py[line:296] INFO 本次未检测到域名存在与证书域名不匹配状态，跳过输出...
[2021-08-21 15:00:20.763] run.py[line:296] INFO 本次未检测到域名存在证书已过期状态，跳过输出...
[2021-08-21 15:00:20.763] run.py[line:296] INFO 本次未检测到域名存在连接超时状态，跳过输出...
[2021-08-21 15:00:20.763] run.py[line:296] INFO 本次未检测到域名存在根域id获取失败状态，跳过输出...
[2021-08-21 15:00:20.763] run.py[line:296] INFO 本次未检测到域名存在dns解析存在其他错误状态，跳过输出...
[2021-08-21 15:00:20.763] run.py[line:296] INFO 本次未检测到域名存在域名解析异常状态，跳过输出...
[2021-08-21 15:00:20.764] run.py[line:296] INFO 本次未检测到域名存在远程主机解析异常状态，跳过输出...
[2021-08-21 15:00:20.764] run.py[line:296] INFO 本次未检测到域名存在远程主机SSL连接异常状态，跳过输出...
[2021-08-21 15:00:20.764] run.py[line:296] INFO 本次未检测到域名存在证书存在其他异常状态，跳过输出...
```

#### 本地证书内容检测
```bash
python3 local_ssl_cert_check.py
```